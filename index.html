<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBambu Colombia - Financial Projections</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        .controls {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .control-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .control-item {
            display: flex;
            flex-direction: column;
        }
        .control-item label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 0.9em;
        }
        .control-item input, .control-item select {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        .control-item input:focus, .control-item select:focus {
            outline: none;
            border-color: #667eea;
        }
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .metric-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }
        .metric-card:hover {
            transform: translateY(-5px);
        }
        .metric-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .chart-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }
        .table-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        th {
            background: #f5f5f5;
            font-weight: 600;
            color: #333;
        }
        tr:hover {
            background: #f9f9f9;
        }
        .positive { color: #10b981; }
        .negative { color: #ef4444; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ‡¨ðŸ‡´ MyBambu Colombia</h1>
            <p>Financial Projections Dashboard</p>
        </div>

        <div class="controls">
            <div class="control-group">
                <div class="control-item">
                    <label for="users">Total Users</label>
                    <input type="number" id="users" value="200000" min="0" step="10000">
                </div>
                <div class="control-item">
                    <label for="activeRate">Active User Rate (%)</label>
                    <input type="number" id="activeRate" value="60" min="0" max="100" step="5">
                </div>
                <div class="control-item">
                    <label for="transPerUser">Transactions per Active User/Month</label>
                    <input type="number" id="transPerUser" value="8" min="0" step="1">
                </div>
                <div class="control-item">
                    <label for="avgAmount">Avg Transaction Amount (COP)</label>
                    <input type="number" id="avgAmount" value="150000" min="0" step="10000">
                </div>
            </div>
            <div class="control-group">
                <div class="control-item">
                    <label for="interchangeFee">Interchange Fee (%)</label>
                    <input type="number" id="interchangeFee" value="1.5" min="0" max="5" step="0.1">
                </div>
                <div class="control-item">
                    <label for="fxSpread">FX Spread (%)</label>
                    <input type="number" id="fxSpread" value="2.0" min="0" max="5" step="0.1">
                </div>
                <div class="control-item">
                    <label for="subFee">Subscription Fee (COP/month)</label>
                    <input type="number" id="subFee" value="15000" min="0" step="1000">
                </div>
                <div class="control-item">
                    <label for="subRate">Subscription Rate (%)</label>
                    <input type="number" id="subRate" value="25" min="0" max="100" step="5">
                </div>
            </div>
        </div>

        <div class="metrics" id="metrics"></div>

        <div class="chart-container">
            <div class="chart-title">Monthly Revenue Breakdown</div>
            <canvas id="revenueChart"></canvas>
        </div>

        <div class="chart-container">
            <div class="chart-title">Profitability Timeline</div>
            <canvas id="profitChart"></canvas>
        </div>

        <div class="table-container">
            <div class="chart-title">12-Month Financial Projection</div>
            <table id="projectionTable"></table>
        </div>
    </div>

    <script>
        let revenueChart, profitChart;

        function formatCurrency(num) {
            return new Intl.NumberFormat('es-CO', {
                style: 'currency',
                currency: 'COP',
                minimumFractionDigits: 0
            }).format(num);
        }

        function formatNumber(num) {
            return new Intl.NumberFormat('es-CO').format(num);
        }

        function calculate() {
            const users = parseInt(document.getElementById('users').value);
            const activeRate = parseFloat(document.getElementById('activeRate').value) / 100;
            const transPerUser = parseFloat(document.getElementById('transPerUser').value);
            const avgAmount = parseFloat(document.getElementById('avgAmount').value);
            const interchangeFee = parseFloat(document.getElementById('interchangeFee').value) / 100;
            const fxSpread = parseFloat(document.getElementById('fxSpread').value) / 100;
            const subFee = parseFloat(document.getElementById('subFee').value);
            const subRate = parseFloat(document.getElementById('subRate').value) / 100;

            const activeUsers = users * activeRate;
            const monthlyTrans = activeUsers * transPerUser;
            const transVolume = monthlyTrans * avgAmount;

            const interchangeRev = transVolume * interchangeFee;
            const fxRev = transVolume * fxSpread;
            const subRev = users * subRate * subFee;
            const totalRevenue = interchangeRev + fxRev + subRev;

            const opexPerUser = 5000;
            const fixedCosts = 150000000;
            const variableOpex = users * opexPerUser;
            const totalOpex = fixedCosts + variableOpex;

            const profit = totalRevenue - totalOpex;
            const margin = (profit / totalRevenue) * 100;

            updateMetrics({
                activeUsers: formatNumber(Math.round(activeUsers)),
                monthlyTrans: formatNumber(Math.round(monthlyTrans)),
                transVolume: formatCurrency(transVolume),
                totalRevenue: formatCurrency(totalRevenue),
                totalOpex: formatCurrency(totalOpex),
                profit: formatCurrency(profit),
                margin: margin.toFixed(1) + '%'
            });

            const months = [];
            const revenueData = { interchange: [], fx: [], subscription: [] };
            const profitData = [];
            const tableData = [];

            for (let m = 1; m <= 12; m++) {
                months.push('Month ' + m);
                const growth = 1 + (m - 1) * 0.05;
                const mUsers = users * growth;
                const mActive = mUsers * activeRate;
                const mTrans = mActive * transPerUser;
                const mVolume = mTrans * avgAmount;

                const mInterchange = mVolume * interchangeFee;
                const mFx = mVolume * fxSpread;
                const mSub = mUsers * subRate * subFee;
                const mRev = mInterchange + mFx + mSub;

                const mOpex = fixedCosts + (mUsers * opexPerUser);
                const mProfit = mRev - mOpex;

                revenueData.interchange.push(mInterchange / 1000000);
                revenueData.fx.push(mFx / 1000000);
                revenueData.subscription.push(mSub / 1000000);
                profitData.push(mProfit / 1000000);

                tableData.push({
                    month: m,
                    users: Math.round(mUsers),
                    revenue: mRev,
                    opex: mOpex,
                    profit: mProfit
                });
            }

            updateCharts(months, revenueData, profitData);
            updateTable(tableData);
        }

        function updateMetrics(data) {
            const metricsDiv = document.getElementById('metrics');
            metricsDiv.innerHTML = '<div class="metric-card"><div class="metric-label">Active Users</div><div class="metric-value">' + data.activeUsers + '</div></div><div class="metric-card"><div class="metric-label">Monthly Transactions</div><div class="metric-value">' + data.monthlyTrans + '</div></div><div class="metric-card"><div class="metric-label">Transaction Volume</div><div class="metric-value">' + data.transVolume + '</div></div><div class="metric-card"><div class="metric-label">Total Revenue</div><div class="metric-value">' + data.totalRevenue + '</div></div><div class="metric-card"><div class="metric-label">Operating Expenses</div><div class="metric-value">' + data.totalOpex + '</div></div><div class="metric-card"><div class="metric-label">Net Profit</div><div class="metric-value ' + (parseFloat(data.profit.replace(/[^0-9.-]/g, '')) >= 0 ? 'positive' : 'negative') + '">' + data.profit + '</div></div>';
        }

        function updateCharts(months, revenueData, profitData) {
            const ctx1 = document.getElementById('revenueChart').getContext('2d');
            const ctx2 = document.getElementById('profitChart').getContext('2d');

            if (revenueChart) revenueChart.destroy();
            if (profitChart) profitChart.destroy();

            revenueChart = new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Interchange',
                        data: revenueData.interchange,
                        backgroundColor: 'rgba(102, 126, 234, 0.8)'
                    }, {
                        label: 'FX Spread',
                        data: revenueData.fx,
                        backgroundColor: 'rgba(118, 75, 162, 0.8)'
                    }, {
                        label: 'Subscriptions',
                        data: revenueData.subscription,
                        backgroundColor: 'rgba(237, 137, 54, 0.8)'
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: { stacked: true },
                        y: { 
                            stacked: true,
                            title: { display: true, text: 'Revenue (Millions COP)' }
                        }
                    }
                }
            });

            profitChart = new Chart(ctx2, {
                type: 'line',
                data: {
                    labels: months,
                    datasets: [{
                        label: 'Net Profit',
                        data: profitData,
                        borderColor: 'rgba(16, 185, 129, 1)',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: { 
                            title: { display: true, text: 'Profit (Millions COP)' }
                        }
                    }
                }
            });
        }

        function updateTable(data) {
            const table = document.getElementById('projectionTable');
            let html = '<thead><tr><th>Month</th><th>Users</th><th>Revenue</th><th>Operating Expenses</th><th>Net Profit</th></tr></thead><tbody>';
            data.forEach(function(row) {
                html += '<tr><td>' + row.month + '</td><td>' + formatNumber(row.users) + '</td><td>' + formatCurrency(row.revenue) + '</td><td>' + formatCurrency(row.opex) + '</td><td class="' + (row.profit >= 0 ? 'positive' : 'negative') + '">' + formatCurrency(row.profit) + '</td></tr>';
            });
            html += '</tbody>';
            table.innerHTML = html;
        }

        document.querySelectorAll('input, select').forEach(function(input) {
            input.addEventListener('input', calculate);
        });

        calculate();
    </script>
</body>
</html>